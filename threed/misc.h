//----------------------------------------------------------------------------
// ThreeD Vector
//----------------------------------------------------------------------------

#ifndef _THREED_MISC_H
#define _THREED_MISC_H

#include <limits.h>

//----------------------------------------------------------------------------
// PI
//----------------------------------------------------------------------------

#ifndef M_PI
#define M_PI 3.14159265358979323846
#endif

//----------------------------------------------------------------------------
// min, max
//----------------------------------------------------------------------------

#define THREED_MIN(a,b) ((a) < (b) ? (a) : (b))

#define THREED_MAX(a,b) ((a) > (b) ? (a) : (b))

// sign of a float value: returns 0 for positive, 1 for negative
#define fsign(f) ((int)((*(long *)(&f) & 0x80000000L) >> 31))

// sign of a double value: returns 0 for positive, 1 for negative
#define dsign(f) ((int)((*(((long *)(&f)) + 1) & 0x80000000L) >> 31))

//----------------------------------------------------------------------------
// roundFloat
//----------------------------------------------------------------------------

inline float roundFloat(float f)
{
    static double r[2] = { 0.0005, -0.0005 };
    return (
        0.001f * (int)(((double)f + r[fsign(f)]) * 1000.0)
    );
}

#endif // _THREED_MISC_H
